---
apiVersion: v1
kind: Namespace
metadata:
  name: davinciapps
  labels:
    name: davinciapps
---
apiVersion: v1
kind: Endpoints
metadata:
  name: external-web
  namespace: davinciapps
subsets:
  - addresses:
      - ip: 192.168.1.240
    ports:
      - name: http
        port: 8081
---
apiVersion: v1
kind: Service
metadata:
  name: external-web
  namespace: davinciapps
spec:
  ports:
    - name: http
      port: 8081
      protocol: TCP
      targetPort: 8081
      nodePort: 0
---
apiVersion: v1
kind: Endpoints
metadata:
  name: prom-node-exporter
  namespace: davinciapps
subsets:
  - addresses:
      - ip: 192.168.1.240
    ports:
      - name: node-exporter
        port: 9100
---
apiVersion: v1
kind: Service
metadata:
  name: prom-node-exporter
  namespace: davinciapps
spec:
  type: ClusterIP
  ports:
    - name: node-exporter
      port: 9100
      protocol: TCP
      targetPort: 9100
      nodePort: 0
---
apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: external-web
  namespace: davinciapps
spec:
  entryPoints:
    - web
    - websecure
  routes:
    - kind: Rule
      match: Host(`davinciapps.pyldin601.dev`) || Host(`davinciapps.pyldin601.xyz`) || Host(`davinciapps.com`)  || Host(`www.davinciapps.com`)
      services:
        - kind: Service
          name: external-web
          port: 8081
  tls:
    certResolver: default
